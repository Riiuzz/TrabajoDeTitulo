# ğŸ§  Mapa Mental del Proyecto

## Niveles de Profundidad en la DocumentaciÃ³n

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ QUICKSTART.md (5 min)   â”‚
                    â”‚ "Haz que funcione YA"   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  README.md (15 min)     â”‚
                    â”‚ "Â¿QuÃ© es este proyecto?"â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                      â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚SETUP.md  â”‚         â”‚SUMMARY.md   â”‚       â”‚PROGRESS.md  â”‚
    â”‚ Instalar â”‚         â”‚Visualizar   â”‚       â”‚ Historial   â”‚
    â”‚y ejecutarâ”‚         â”‚arquitectura â”‚       â”‚  de avances â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚
    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Profundizar en cÃ³digo      â”‚
    â”‚ (app.py, scraper_activa.py)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ãrbol de Temas

```
â”œâ”€â”€ ğŸ“ Â¿DÃ“NDE EMPEZAR?
â”‚   â”œâ”€â”€ ğŸ‘¶ Completamente nuevo â†’ QUICKSTART.md
â”‚   â”œâ”€â”€ ğŸ“š Conocer el proyecto â†’ README.md
â”‚   â”œâ”€â”€ ğŸ› ï¸ Instalar y ejecutar â†’ SETUP.md
â”‚   â””â”€â”€ ğŸ—ºï¸ Ver todo de un vistazo â†’ SUMMARY.md
â”‚
â”œâ”€â”€ ğŸ“– DOCUMENTACIÃ“N
â”‚   â”œâ”€â”€ ğŸš€ QUICKSTART.md - Inicio en 5 minutos
â”‚   â”œâ”€â”€ ğŸ“– README.md - DescripciÃ³n general
â”‚   â”œâ”€â”€ ğŸ› ï¸ SETUP.md - InstalaciÃ³n detallada
â”‚   â”œâ”€â”€ ğŸ“Š SUMMARY.md - VisiÃ³n visual
â”‚   â”œâ”€â”€ ğŸ—‚ï¸ TREE.md - Estructura de carpetas
â”‚   â”œâ”€â”€ ğŸ“‹ PROGRESS.md - Historial de avances
â”‚   â”œâ”€â”€ ğŸ“‘ INDEX.md - Ãndice de documentaciÃ³n
â”‚   â”œâ”€â”€ ğŸ§  MINDMAP.md - Este archivo
â”‚   â””â”€â”€ ğŸ’¡ QUICKSTART.md - Ideas rÃ¡pidas
â”‚
â”œâ”€â”€ ğŸ’» CÃ“DIGO
â”‚   â”œâ”€â”€ ğŸ Backend (Python)
â”‚   â”‚   â”œâ”€â”€ app.py - LÃ³gica principal
â”‚   â”‚   â””â”€â”€ scraper_activa.py - Web scraping
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”µ Frontend (JavaScript/React)
â”‚   â”‚   â”œâ”€â”€ App.js - Componente principal
â”‚   â”‚   â””â”€â”€ App.css - Estilos
â”‚   â”‚
â”‚   â””â”€â”€ âš™ï¸ ConfiguraciÃ³n
â”‚       â”œâ”€â”€ requirements.txt - Dependencias Python
â”‚       â”œâ”€â”€ package.json - Dependencias Node
â”‚       â”œâ”€â”€ .env - Credenciales (NO git)
â”‚       â””â”€â”€ .gitignore - Exclusiones
â”‚
â”œâ”€â”€ ğŸ“Š BASE DE DATOS
â”‚   â”œâ”€â”€ Interacciones
â”‚   â”‚   â””â”€â”€ Almacena chats del usuario
â”‚   â”‚
â”‚   â””â”€â”€ Activa Content
â”‚       â””â”€â”€ Almacena contenido scrapeado
â”‚
â”œâ”€â”€ ğŸ”§ TECNOLOGÃAS
â”‚   â”œâ”€â”€ Backend
â”‚   â”‚   â”œâ”€â”€ Flask - Web framework
â”‚   â”‚   â”œâ”€â”€ Gemini - IA/ClasificaciÃ³n
â”‚   â”‚   â”œâ”€â”€ MongoDB - Base de datos
â”‚   â”‚   â”œâ”€â”€ BeautifulSoup - Web scraping
â”‚   â”‚   â””â”€â”€ Python-dotenv - Config
â”‚   â”‚
â”‚   â”œâ”€â”€ Frontend
â”‚   â”‚   â”œâ”€â”€ React - UI framework
â”‚   â”‚   â”œâ”€â”€ JavaScript ES6 - LÃ³gica
â”‚   â”‚   â””â”€â”€ CSS3 - Estilos
â”‚   â”‚
â”‚   â””â”€â”€ Externo
â”‚       â”œâ”€â”€ Google Gemini API
â”‚       â”œâ”€â”€ MongoDB Atlas
â”‚       â””â”€â”€ Activa Research (sitio)
â”‚
â”œâ”€â”€ ğŸ“ˆ AVANCES
â”‚   â”œâ”€â”€ Avance #1 - Prototipo Base
â”‚   â”‚   â”œâ”€â”€ Chat conversacional
â”‚   â”‚   â”œâ”€â”€ ClasificaciÃ³n 5 categorÃ­as
â”‚   â”‚   â”œâ”€â”€ Respuestas con Gemini
â”‚   â”‚   â””â”€â”€ MongoDB para persistencia
â”‚   â”‚
â”‚   â””â”€â”€ Avance #2 - Web Scraping (1 Dic)
â”‚       â”œâ”€â”€ Descarga contenido Activa
â”‚       â”œâ”€â”€ Almacena en MongoDB
â”‚       â”œâ”€â”€ Bot busca informaciÃ³n local
â”‚       â”œâ”€â”€ Respuestas mÃ¡s precisas
â”‚       â””â”€â”€ Fixes: datetime, API keys
â”‚
â””â”€â”€ ğŸš€ PRÃ“XIMOS PASOS
    â”œâ”€â”€ Automatizar scraper (APScheduler)
    â”œâ”€â”€ BÃºsqueda full-text en MongoDB
    â”œâ”€â”€ Cachear respuestas de Gemini
    â”œâ”€â”€ Panel de administraciÃ³n
    â”œâ”€â”€ Tests unitarios
    â””â”€â”€ Desplegar en producciÃ³n
```

---

## Decisiones de DiseÃ±o

```
PROBLEMA: Bot con informaciÃ³n genÃ©rica
           â”‚
           â”œâ”€ OpciÃ³n 1: Scraping en tiempo real (lento)
           â”œâ”€ OpciÃ³n 2: Gemini con bÃºsqueda web (dependencias)
           â”‚
           â””â”€ âœ… OpciÃ³n 3: Web Scraping + Ãndice Local
              â”‚
              â”œâ”€ Ventajas:
              â”‚  â”œâ”€ RÃ¡pido (bÃºsqueda local)
              â”‚  â”œâ”€ Confiable (datos reales)
              â”‚  â””â”€ Flexible (fÃ¡cil actualizar)
              â”‚
              â””â”€ ImplementaciÃ³n:
                 â”œâ”€ scraper_activa.py descarga HTML
                 â”œâ”€ BeautifulSoup extrae contenido
                 â”œâ”€ MongoDB almacena en activa_content
                 â””â”€ Bot busca y passa a Gemini
```

---

## Flujo de Datos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Usuario en Chat     â”‚
â”‚ (http://localhost:3  â”‚
â”‚      000)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
      â”‚   POST      â”‚
      â”‚ /api/chat   â”‚
      â”‚ {message}   â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Backend Flask (5000)    â”‚
      â”‚ 1. Clasificar mensaje   â”‚
      â”‚ 2. Buscar en MongoDB    â”‚
      â”‚ 3. Enviar a Gemini      â”‚
      â”‚ 4. Guardar en BD        â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        â”‚        â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â–¼â”€â”€â”€â”€â”  â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Geminiâ”‚  â”‚Mongo â”‚  â”‚Activa Webâ”‚
â”‚API   â”‚  â”‚Atlas â”‚  â”‚(Scraper) â”‚
â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚        â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚ Respuesta del Bot  â”‚
      â”‚ + CategorÃ­a        â”‚
      â”‚ + Modo (Gemini)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Frontend React  â”‚
      â”‚ (3000)          â”‚
      â”‚ Muestra respuesta
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Matriz de Responsabilidades

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COMPONENTE       â”‚ RESPONSABILIDAD                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ App.py           â”‚ LÃ³gica del bot, clasificaciÃ³n       â”‚
â”‚ Scraper          â”‚ Descargar y procesar web            â”‚
â”‚ Gemini API       â”‚ Clasificar y generar respuestas     â”‚
â”‚ MongoDB          â”‚ Persistencia de datos               â”‚
â”‚ React            â”‚ Interfaz visual                     â”‚
â”‚ .env             â”‚ Credenciales y configuraciÃ³n        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ciclo de Vida de un Mensaje

```
Paso 1: Usuario escribe "Â¿QuÃ© es Activa?"
         â”‚
         â–¼
Paso 2: Frontend envÃ­a POST /api/chat
         â”‚
         â–¼
Paso 3: Backend recibe JSON {message: "Â¿QuÃ© es Activa?"}
         â”‚
         â–¼
Paso 4: Llama clasificar_mensaje(mensaje)
         â”‚
         â”œâ”€ Usa Gemini para clasificar
         â””â”€ Resultado: categorÃ­a = 1 (Sobre Activa)
         â”‚
         â–¼
Paso 5: Si categorÃ­a == 1:
         â”‚
         â””â”€ Busca en MongoDB colecciÃ³n "activa_content"
            â””â”€ Extrae informaciÃ³n sobre "QuiÃ©nes Somos"
         â”‚
         â–¼
Paso 6: Crea prompt para Gemini:
         "Eres asistente de Activa.
          InformaciÃ³n: [datos de MongoDB]
          Pregunta: Â¿QuÃ© es Activa?"
         â”‚
         â–¼
Paso 7: Gemini genera respuesta
         â”‚
         â–¼
Paso 8: Backend guarda en MongoDB:
         {
           usuario_msg: "Â¿QuÃ© es Activa?",
           categorÃ­a: 1,
           respuesta: "[respuesta de Gemini]",
           modo: "gemini",
           timestamp: ahora
         }
         â”‚
         â–¼
Paso 9: Retorna JSON al frontend
         â”‚
         â–¼
Paso 10: React muestra respuesta en el chat
         â”‚
         â–¼
âœ… Usuario ve respuesta en tiempo real
```

---

## Dependencias y sus Funciones

```
Backend
â”œâ”€ Flask (3.0.0) - Crear servidor web
â”œâ”€ Flask-CORS (4.0.0) - Permitir peticiones desde frontend
â”œâ”€ python-dotenv (1.2.1) - Leer .env
â”œâ”€ pymongo (4.15.4) - Conectar a MongoDB
â”œâ”€ google-generativeai (0.3.0) - Usar API Gemini
â”œâ”€ requests (2.32.5) - Descargar HTML [NUEVO]
â””â”€ beautifulsoup4 (4.14.3) - Parsear HTML [NUEVO]

Frontend
â”œâ”€ React (18.x) - Framework UI
â”œâ”€ React-DOM (18.x) - Renderizar DOM
â””â”€ Fetch API - HTTP client (nativo)

Externo
â”œâ”€ Google Gemini API - IA
â”œâ”€ MongoDB Atlas - Base de datos
â””â”€ Activa Research Web - Fuente datos
```

---

## Checklist del Proyecto

### InstalaciÃ³n
- [ ] Python 3.8+ instalado
- [ ] Node.js 14+ instalado
- [ ] Entorno virtual creado (venv)
- [ ] Dependencias Python instaladas
- [ ] Dependencias Node instaladas
- [ ] Archivo .env creado en backend/

### ConfiguraciÃ³n
- [ ] GEMINI_API_KEY en .env
- [ ] MONGODB_URI en .env
- [ ] MONGODB_DBNAME en .env

### EjecuciÃ³n
- [ ] Scraper ejecutado (`python scraper_activa.py`)
- [ ] Backend corriendo (puerto 5000)
- [ ] Frontend corriendo (puerto 3000)
- [ ] Bot responde en navegador

### VerificaciÃ³n
- [ ] Mensaje "Â¿QuÃ© es Activa?" â†’ respuesta real
- [ ] MongoDB contiene datos en ambas colecciones
- [ ] Logs muestran clasificaciÃ³n correcta
- [ ] No hay errores en consola

---

## Preguntas Frecuentes Referencia RÃ¡pida

```
P: Â¿Por dÃ³nde empiezo?
R: QUICKSTART.md (5 minutos)

P: Â¿CÃ³mo instalo todo?
R: SETUP.md (paso a paso)

P: Â¿QuÃ© se ha hecho?
R: PROGRESS.md (historial completo)

P: Â¿CÃ³mo funciona el bot?
R: SUMMARY.md (diagrama visual)

P: Â¿DÃ³nde estÃ¡ cada archivo?
R: TREE.md (estructura del proyecto)

P: Â¿CÃ³mo sigue de aquÃ­?
R: Ver "PrÃ³ximos Pasos" en PROGRESS.md
```

---

**Ãšltima actualizaciÃ³n:** 1 de Diciembre, 2025  
**VersiÃ³n:** 2.0 con Web Scraping
